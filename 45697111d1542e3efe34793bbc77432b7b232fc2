{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "f9c3aa82_f487f492",
        "filename": "copytool/scheduler.c",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2022-10-18T13:41:56Z",
      "side": 1,
      "message": "suggest: I think this would be nice in a specific Phobos file, so this file is not \"polluted\" in case we don\u0027t want to use it.",
      "range": {
        "startLine": 15,
        "startChar": 11,
        "endLine": 15,
        "endChar": 24
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "023eeaac_2b031744",
        "filename": "copytool/scheduler.c",
        "patchSetId": 2
      },
      "lineNbr": 15,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2022-10-19T07:14:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f9c3aa82_f487f492",
      "range": {
        "startLine": 15,
        "startChar": 11,
        "endLine": 15,
        "endChar": 24
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ca0917bd_24dff98c",
        "filename": "copytool/scheduler.c",
        "patchSetId": 2
      },
      "lineNbr": 24,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2022-10-18T13:41:56Z",
      "side": 1,
      "message": "question: why solely the restores and not the archives as well ?",
      "range": {
        "startLine": 24,
        "startChar": 17,
        "endLine": 24,
        "endChar": 24
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "43b387e1_9f471aca",
        "filename": "copytool/scheduler.c",
        "patchSetId": 2
      },
      "lineNbr": 24,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2022-10-19T07:14:18Z",
      "side": 1,
      "message": "Because a restore implies a get on Phobos\u0027 copytool which is the only request that needs a locate. Archive -\u003e write, Remove -\u003e delete. Both of these don\u0027t need a specific node to be executed.",
      "parentUuid": "ca0917bd_24dff98c",
      "range": {
        "startLine": 24,
        "startChar": 17,
        "endLine": 24,
        "endChar": 24
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c8720998_ed06560d",
        "filename": "copytool/scheduler.c",
        "patchSetId": 2
      },
      "lineNbr": 24,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2022-10-19T07:39:12Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "43b387e1_9f471aca",
      "range": {
        "startLine": 24,
        "startChar": 17,
        "endLine": 24,
        "endChar": 24
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "34c842f8_57638333",
        "filename": "copytool/scheduler.c",
        "patchSetId": 2
      },
      "lineNbr": 36,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2022-10-18T13:41:56Z",
      "side": 1,
      "message": "nit: use errno here, after setting it back just after the close",
      "range": {
        "startLine": 36,
        "startChar": 10,
        "endLine": 36,
        "endChar": 20
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0cca6d3d_81cb8a93",
        "filename": "copytool/scheduler.c",
        "patchSetId": 2
      },
      "lineNbr": 36,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2022-10-19T07:14:18Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "34c842f8_57638333",
      "range": {
        "startLine": 36,
        "startChar": 10,
        "endLine": 36,
        "endChar": 20
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "88c94171_d81057a8",
        "filename": "copytool/scheduler.c",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2022-10-18T13:41:56Z",
      "side": 1,
      "message": "suggest: since the result code of the locate is irrelevant, I think merging the conditions lines 76 and 81 would be a good idea. You could even just remove the use of \"rc\" in this function, initialize hostname to NULL line 66 and remove this specific if",
      "range": {
        "startLine": 76,
        "startChar": 1,
        "endLine": 78,
        "endChar": 14
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd4bb282_743b767a",
        "filename": "copytool/scheduler.c",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2022-10-19T07:14:18Z",
      "side": 1,
      "message": "You have to know why hostname is NULL. hostname \u003d\u003d NULL \u0026\u0026 rc \u003d\u003d 0 is different from hostname \u003d\u003d NULL \u0026\u0026 rc !\u003d 0. So the rc is necessary. And, I think it\u0027s better to make the if (rc) return true; explicit rather than having a more complex error handling in a single if statement.",
      "parentUuid": "88c94171_d81057a8",
      "range": {
        "startLine": 76,
        "startChar": 1,
        "endLine": 78,
        "endChar": 14
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "245a5784_0251edac",
        "filename": "copytool/scheduler.c",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2022-10-19T07:39:12Z",
      "side": 1,
      "message": "I understand that there is a difference, but outside of this function, the result is exactly the same, a \"return true\". So the two conditions you wrote in this comment thread will end up with a \"return true\", and so the caller cannot know the difference you describe unless they also check hostname",
      "parentUuid": "dd4bb282_743b767a",
      "range": {
        "startLine": 76,
        "startChar": 1,
        "endLine": 78,
        "endChar": 14
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1d3c6195_6e39e8b5",
        "filename": "copytool/scheduler.c",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1003556
      },
      "writtenOn": "2022-10-19T09:02:44Z",
      "side": 1,
      "message": "I agree with Guillaume\u0027s opinion here that splitting checks is easier to understand / maintain / update later if required; the comment helps.\n\nI don\u0027t know/remember if phobos_locate() has its own logging when it fails, but if not a debug message here (ratelimited log messages to add on the todo!) could be added later for example -- that might be very useful for production when someone tries to understand why requests are going to the wrong node.",
      "parentUuid": "245a5784_0251edac",
      "range": {
        "startLine": 76,
        "startChar": 1,
        "endLine": 78,
        "endChar": 14
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a63c5024_b7e6985b",
        "filename": "copytool/scheduler.c",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2022-10-19T14:03:22Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "1d3c6195_6e39e8b5",
      "range": {
        "startLine": 76,
        "startChar": 1,
        "endLine": 78,
        "endChar": 14
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d62bffcf_c3eb26f5",
        "filename": "copytool/scheduler.c",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2022-10-25T12:39:00Z",
      "side": 1,
      "message": "phobos_locate will log on error. Were you waiting for an answer before validating this patch?",
      "parentUuid": "a63c5024_b7e6985b",
      "range": {
        "startLine": 76,
        "startChar": 1,
        "endLine": 78,
        "endChar": 14
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "533987e8_87566a64",
        "filename": "copytool/scheduler.c",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 1003556
      },
      "writtenOn": "2022-10-25T12:55:52Z",
      "side": 1,
      "message": "No sorry just wanted to confirm the code move and got busy/forgot. LGTM; happy to let you merge this on your time.",
      "parentUuid": "d62bffcf_c3eb26f5",
      "range": {
        "startLine": 76,
        "startChar": 1,
        "endLine": 78,
        "endChar": 14
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "595d7b96_e69da69f",
        "filename": "meson.build",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2022-10-18T13:41:56Z",
      "side": 1,
      "message": "minor: if you want to be thorough, checking that you also got jansson here would be nice, since it is also required",
      "range": {
        "startLine": 35,
        "startChar": 55,
        "endLine": 35,
        "endChar": 60
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "978f1cc0_87347703",
        "filename": "meson.build",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2022-10-19T07:14:18Z",
      "side": 1,
      "message": "But jansson is a required dependency and used by other parts of the code, not just Phobos. So we won\u0027t be able to compile anything or even make it past the `meson build` step without jansson.",
      "parentUuid": "595d7b96_e69da69f",
      "range": {
        "startLine": 35,
        "startChar": 55,
        "endLine": 35,
        "endChar": 60
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "047c7e54_bf70c393",
        "filename": "meson.build",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2022-10-19T07:39:12Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "978f1cc0_87347703",
      "range": {
        "startLine": 35,
        "startChar": 55,
        "endLine": 35,
        "endChar": 60
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "81d428aa_28f8bc95",
        "filename": "meson.build",
        "patchSetId": 2
      },
      "lineNbr": 101,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2022-10-18T13:41:56Z",
      "side": 1,
      "message": "question: even if glib is a dependency of phobos, you still have to put it here ?",
      "range": {
        "startLine": 101,
        "startChar": 31,
        "endLine": 101,
        "endChar": 35
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e5fffd0_80e23fa4",
        "filename": "meson.build",
        "patchSetId": 2
      },
      "lineNbr": 101,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2022-10-19T07:14:18Z",
      "side": 1,
      "message": "Yes because Phobos\u0027 packaging is basically inexistant so each project has to know the dependencies of Phobos...",
      "parentUuid": "81d428aa_28f8bc95",
      "range": {
        "startLine": 101,
        "startChar": 31,
        "endLine": 101,
        "endChar": 35
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "76e0f6f8_6a685e96",
        "filename": "meson.build",
        "patchSetId": 2
      },
      "lineNbr": 101,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2022-10-19T07:39:12Z",
      "side": 1,
      "message": "But then why isn\u0027t there also a \"jansson\" in here ?",
      "parentUuid": "2e5fffd0_80e23fa4",
      "range": {
        "startLine": 101,
        "startChar": 31,
        "endLine": 101,
        "endChar": 35
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0f02c787_3c1b7239",
        "filename": "meson.build",
        "patchSetId": 2
      },
      "lineNbr": 101,
      "author": {
        "id": 1003556
      },
      "writtenOn": "2022-10-19T09:02:44Z",
      "side": 1,
      "message": "it is line 22: the whole meson setup will fail if jansson is missing.",
      "parentUuid": "76e0f6f8_6a685e96",
      "range": {
        "startLine": 101,
        "startChar": 31,
        "endLine": 101,
        "endChar": 35
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3ced7cf8_0e0c5e19",
        "filename": "meson.build",
        "patchSetId": 2
      },
      "lineNbr": 102,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2022-10-18T13:41:56Z",
      "side": 1,
      "message": "question: is this necessary ?",
      "range": {
        "startLine": 102,
        "startChar": 54,
        "endLine": 102,
        "endChar": 55
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "be7770be_d22e6149",
        "filename": "meson.build",
        "patchSetId": 2
      },
      "lineNbr": 102,
      "author": {
        "id": 1019142
      },
      "writtenOn": "2022-10-19T07:14:18Z",
      "side": 1,
      "message": "Yes, for the config.h",
      "parentUuid": "3ced7cf8_0e0c5e19",
      "range": {
        "startLine": 102,
        "startChar": 54,
        "endLine": 102,
        "endChar": 55
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "61528dee_3bb4d652",
        "filename": "meson.build",
        "patchSetId": 2
      },
      "lineNbr": 102,
      "author": {
        "id": 1019048
      },
      "writtenOn": "2022-10-19T07:39:12Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "be7770be_d22e6149",
      "range": {
        "startLine": 102,
        "startChar": 54,
        "endLine": 102,
        "endChar": 55
      },
      "revId": "45697111d1542e3efe34793bbc77432b7b232fc2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}